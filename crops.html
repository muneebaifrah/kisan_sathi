<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crops - Kisan Sathi</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f8f5;
            display: flex;
            min-height: 100vh;
        }
        /* Sidebar */
        .sidebar {
            width: 260px;
            background: white;
            box-shadow: 2px 0 15px rgba(0, 0, 0, 0.08);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
        }
        .sidebar-header {
            padding: 25px 20px;
            border-bottom: 1px solid #e8f5e8;
            display: flex;
            align-items: center;
            gap: 12px;
            background: linear-gradient(135deg, #e8f5e8, #f5f8f5);
        }
        .logo {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #4CAF50, #66BB6A);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            box-shadow: 0 4px 10px rgba(76, 175, 80, 0.3);
        }
        .brand {
            font-size: 20px;
            font-weight: 700;
            color: #2e7d32;
        }
        .nav-menu { padding: 20px 0; }
        .nav-item {
            display: flex;
            align-items: center;
            padding: 14px 20px;
            color: #666;
            text-decoration: none;
            gap: 12px;
            transition: all 0.3s;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            border-left: 3px solid transparent;
        }
        .nav-item:hover {
            background: #f5f8f5;
            color: #2e7d32;
        }
        .nav-item.active {
            background: #e8f5e8;
            color: #2e7d32;
            border-left-color: #4CAF50;
            font-weight: 600;
        }
        .main-content {
            margin-left: 260px;
            flex: 1;
            min-height: 100vh;
        }
        .header {
            background: white;
            padding: 25px 40px;
            border-bottom: 1px solid #e8f5e8;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        .greeting h2 { color: #2e7d32; font-size: 26px; margin-bottom: 5px; }
        .greeting p { color: #999; font-size: 14px; }
        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: #e8f5e8;
            border-radius: 20px;
            font-size: 13px;
            color: #2e7d32;
            font-weight: 600;
        }
        .status-dot {
            width: 8px;
            height: 8px;
            background: #4CAF50;
            border-radius: 50%;
            animation: pulse-dot 2s infinite;
        }
        @keyframes pulse-dot {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .profile-btn {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #4CAF50, #66BB6A);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(76, 175, 80, 0.3);
        }
        .dashboard-content { padding: 30px 40px; }
        .page-title {
            font-size: 28px;
            color: #2e7d32;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .action-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }
        .btn-primary {
            padding: 12px 24px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }
        .recommendation-section {
            background: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
        }
        .section-title {
            font-size: 22px;
            color: #2e7d32;
            margin-bottom: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .recommendation-content {
            background: #f9fdf9;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #4CAF50;
        }
        .recommendation-content h3 {
            color: #2e7d32;
            margin-bottom: 12px;
            font-size: 18px;
        }
        .recommendation-content p {
            color: #555;
            line-height: 1.8;
            margin-bottom: 10px;
        }
        .recommendation-content ul {
            margin-left: 20px;
            color: #555;
            line-height: 1.8;
        }
        .crops-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .crop-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
            position: relative;
        }
        .crop-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
        }
        .crop-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }
        .crop-name {
            font-size: 20px;
            font-weight: 700;
            color: #2e7d32;
            margin-bottom: 5px;
        }
        .crop-icon {
            font-size: 32px;
        }
        .crop-detail {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
            font-size: 14px;
        }
        .crop-detail:last-child {
            border-bottom: none;
        }
        .detail-label {
            color: #666;
            font-weight: 500;
        }
        .detail-value {
            color: #333;
            font-weight: 600;
        }
        .crop-status {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-top: 10px;
        }
        .status-growing {
            background: #e8f5e8;
            color: #2e7d32;
        }
        .status-harvesting {
            background: #fff3e0;
            color: #e65100;
        }
        .status-planning {
            background: #e3f2fd;
            color: #1565c0;
        }
        .crop-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .btn-edit, .btn-delete {
            flex: 1;
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-edit {
            background: #e3f2fd;
            color: #1976d2;
        }
        .btn-edit:hover {
            background: #1976d2;
            color: white;
        }
        .btn-delete {
            background: #ffebee;
            color: #c62828;
        }
        .btn-delete:hover {
            background: #c62828;
            color: white;
        }
        .voice-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 65px;
            height: 65px;
            background: linear-gradient(135deg, #4CAF50, #66BB6A);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.4);
            transition: all 0.3s;
            z-index: 999;
        }
        .voice-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(76, 175, 80, 0.5);
        }
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.3s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            animation: slideDown 0.3s;
        }
        @keyframes slideDown {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        .modal-title {
            font-size: 24px;
            color: #2e7d32;
            font-weight: 700;
        }
        .close-btn {
            font-size: 28px;
            cursor: pointer;
            color: #999;
            background: none;
            border: none;
            transition: all 0.3s;
        }
        .close-btn:hover {
            color: #c62828;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 14px;
        }
        .form-input, .form-select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #4CAF50;
        }
        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }
        .btn-submit, .btn-cancel {
            flex: 1;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-submit {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
        }
        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }
        .btn-cancel {
            background: #f5f5f5;
            color: #666;
        }
        .btn-cancel:hover {
            background: #e0e0e0;
        }
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }
        .empty-state-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <nav class="sidebar">
        <div class="sidebar-header">
            <div class="logo">üå±</div>
            <span class="brand">Kisan Sathi</span>
        </div>
        <div class="nav-menu">
            <a href="dashboard.html" class="nav-item"><span class="nav-icon">üìä</span>Dashboard</a>
            <a href="weather.html" class="nav-item"><span class="nav-icon">‚õÖ</span>Weather</a>
            <a href="crops.html" class="nav-item active"><span class="nav-icon">üåæ</span>Crops</a>
            <a href="market-prices.html" class="nav-item"><span class="nav-icon">üí∞</span>Market Prices</a>
            <a href="news.html" class="nav-item"><span class="nav-icon">üì∞</span>News</a>
            <a href="tools.html" class="nav-item"><span class="nav-icon">üõ†Ô∏è</span>Farming Tools</a>
            <a href="settings.html" class="nav-item"><span class="nav-icon">‚öôÔ∏è</span>Settings</a>
            <a href="profile.html" class="nav-item"><span class="nav-icon">üë§</span>My Profile</a>
            <a href="index.html" class="nav-item" style="margin-top: 20px; color: #c62828;"><span class="nav-icon">üö™</span>Logout</a>
        </div>
    </nav>

    <div class="main-content">
        <header class="header">
            <div class="greeting">
                <h2>Crop Management</h2>
                <p>Monitor and manage your crops effectively</p>
            </div>
            <div class="header-right">
                <div class="status-indicator">
                    <div class="status-dot"></div><span>Online</span>
                </div>
                <div class="profile-btn" id="profileInitials">DU</div>
            </div>
        </header>

        <div class="dashboard-content">
            <h1 class="page-title">üåæ My Crops</h1>
            <div class="action-bar">
                <button class="btn-primary" onclick="openAddModal()">+ Add New Crop</button>
                <button class="btn-primary" onclick="showRecommendation()">ü§ñ Get AI Recommendation</button>
            </div>

            <div class="recommendation-section" id="recommendationSection" style="display: none;">
                <h2 class="section-title">ü§ñ AI Crop Recommendations</h2>
                <div class="recommendation-content" id="recommendationContent">
                    <!-- Recommendation will be inserted here -->
                </div>
            </div>

            <div class="crops-grid" id="cropsGrid">
                <!-- Crops will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Add/Edit Crop Modal -->
    <div id="cropModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Add New Crop</h2>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <form id="cropForm">
                <div class="form-group">
                    <label class="form-label">Crop Name</label>
                    <input type="text" class="form-input" id="cropName" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Area (Acres)</label>
                    <input type="number" class="form-input" id="cropArea" step="0.1" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Planted Date</label>
                    <input type="date" class="form-input" id="cropDate" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Expected Harvest</label>
                    <input type="date" class="form-input" id="cropHarvest" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-select" id="cropStatus" required>
                        <option value="planning">Planning</option>
                        <option value="growing">Growing</option>
                        <option value="harvesting">Harvesting</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-submit" id="submitBtn">Add Crop</button>
                    <button type="button" class="btn-cancel" onclick="closeModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Voice Button -->
    <button class="voice-btn" onclick="activateVoice()">üé§</button>

    <script>
        // User initials
        const userData = window.userData || { userName: "Demo User" };
        document.getElementById('profileInitials').textContent = userData.userName.split(' ').map(n => n[0]).join('').toUpperCase();

        // Crop data
        let crops = [
            {
                id: 1,
                name: "Rice",
                icon: "üåæ",
                area: 5.5,
                planted: "2024-06-15",
                harvest: "2024-10-15",
                status: "growing"
            },
            {
                id: 2,
                name: "Cotton",
                icon: "üåø",
                area: 3.2,
                planted: "2024-05-20",
                harvest: "2024-11-20",
                status: "growing"
            },
            {
                id: 3,
                name: "Turmeric",
                icon: "üß°",
                area: 2.0,
                planted: "2024-07-01",
                harvest: "2025-01-15",
                status: "growing"
            },
            {
                id: 4,
                name: "Maize",
                icon: "üåΩ",
                area: 4.5,
                planted: "2024-08-10",
                harvest: "2024-12-10",
                status: "growing"
            }
        ];

        let editingCropId = null;

        // Render crops
        function renderCrops() {
            const cropsGrid = document.getElementById('cropsGrid');
            
            if (crops.length === 0) {
                cropsGrid.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üåæ</div>
                        <h3>No crops added yet</h3>
                        <p>Click "Add New Crop" to get started</p>
                    </div>
                `;
                return;
            }

            cropsGrid.innerHTML = crops.map(crop => `
                <div class="crop-card">
                    <div class="crop-header">
                        <div>
                            <div class="crop-name">${crop.name}</div>
                            <span class="crop-status status-${crop.status}">
                                ${crop.status.charAt(0).toUpperCase() + crop.status.slice(1)}
                            </span>
                        </div>
                        <div class="crop-icon">${crop.icon}</div>
                    </div>
                    <div class="crop-detail">
                        <span class="detail-label">Area</span>
                        <span class="detail-value">${crop.area} acres</span>
                    </div>
                    <div class="crop-detail">
                        <span class="detail-label">Planted</span>
                        <span class="detail-value">${formatDate(crop.planted)}</span>
                    </div>
                    <div class="crop-detail">
                        <span class="detail-label">Harvest</span>
                        <span class="detail-value">${formatDate(crop.harvest)}</span>
                    </div>
                    <div class="crop-actions">
                        <button class="btn-edit" onclick="editCrop(${crop.id})">‚úèÔ∏è Edit</button>
                        <button class="btn-delete" onclick="deleteCrop(${crop.id})">üóëÔ∏è Delete</button>
                    </div>
                </div>
            `).join('');
        }

        // Format date
        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('en-IN', { day: '2-digit', month: 'short', year: 'numeric' });
        }

        // Crop icons mapping
        const cropIcons = {
            'rice': 'üåæ', 'wheat': 'üåæ', 'cotton': 'üåø', 'turmeric': 'üß°',
            'maize': 'üåΩ', 'corn': 'üåΩ', 'tomato': 'üçÖ', 'potato': 'ü•î',
            'onion': 'üßÖ', 'chili': 'üå∂Ô∏è', 'sugarcane': 'üéã', 'groundnut': 'ü•ú',
            'soybean': 'ü´ò', 'sunflower': 'üåª', 'mustard': 'üåº'
        };

        function getCropIcon(cropName) {
            const name = cropName.toLowerCase();
            return cropIcons[name] || 'üå±';
        }

        // Open add modal
        function openAddModal() {
            editingCropId = null;
            document.getElementById('modalTitle').textContent = 'Add New Crop';
            document.getElementById('submitBtn').textContent = 'Add Crop';
            document.getElementById('cropForm').reset();
            document.getElementById('cropModal').style.display = 'block';
        }

        // Edit crop
        function editCrop(id) {
            const crop = crops.find(c => c.id === id);
            if (!crop) return;

            editingCropId = id;
            document.getElementById('modalTitle').textContent = 'Edit Crop';
            document.getElementById('submitBtn').textContent = 'Update Crop';
            document.getElementById('cropName').value = crop.name;
            document.getElementById('cropArea').value = crop.area;
            document.getElementById('cropDate').value = crop.planted;
            document.getElementById('cropHarvest').value = crop.harvest;
            document.getElementById('cropStatus').value = crop.status;
            document.getElementById('cropModal').style.display = 'block';
        }

        // Delete crop
        function deleteCrop(id) {
            if (confirm('Are you sure you want to delete this crop?')) {
                crops = crops.filter(c => c.id !== id);
                renderCrops();
            }
        }

        // Close modal
        function closeModal() {
            document.getElementById('cropModal').style.display = 'none';
            document.getElementById('cropForm').reset();
            editingCropId = null;
        }

        // Handle form submission
        document.getElementById('cropForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const cropData = {
                name: document.getElementById('cropName').value,
                icon: getCropIcon(document.getElementById('cropName').value),
                area: parseFloat(document.getElementById('cropArea').value),
                planted: document.getElementById('cropDate').value,
                harvest: document.getElementById('cropHarvest').value,
                status: document.getElementById('cropStatus').value
            };

            if (editingCropId) {
                // Update existing crop
                const index = crops.findIndex(c => c.id === editingCropId);
                crops[index] = { ...crops[index], ...cropData };
            } else {
                // Add new crop
                cropData.id = Date.now();
                crops.push(cropData);
            }

            renderCrops();
            closeModal();
        });

        // Show AI recommendation
        function showRecommendation() {
            const recommendations = [
                {
                    title: "Best Crops for Current Season",
                    content: "Based on the current weather patterns and soil conditions in Telangana, here are our AI-powered recommendations for optimal crop selection:",
                    crops: [
                        "Rice: Excellent choice due to adequate rainfall and temperature. Expected yield: 25-30 quintals per acre.",
                        "Cotton: High market demand and suitable conditions. Expected yield: 15-18 quintals per acre.",
                        "Maize: Fast-growing crop with good market prices. Expected yield: 20-25 quintals per acre.",
                        "Turmeric: High-value crop suitable for your region. Expected yield: 30-35 quintals per acre."
                    ],
                    tips: [
                        "Ensure proper irrigation during dry spells",
                        "Use organic fertilizers for better soil health",
                        "Monitor pest control regularly",
                        "Consider crop rotation to maintain soil fertility"
                    ]
                },
                {
                    title: "Soil Health & Fertilizer Recommendations",
                    content: "AI analysis of your farm's soil composition suggests the following improvements:",
                    crops: [
                        "Nitrogen levels: Apply urea at 120 kg per acre for rice cultivation",
                        "Phosphorus: Use DAP fertilizer at 50 kg per acre",
                        "Potassium: Apply potash at 30 kg per acre for better crop quality",
                        "Organic matter: Add compost to improve soil structure"
                    ],
                    tips: [
                        "Test soil pH levels every 6 months",
                        "Use green manure crops between seasons",
                        "Maintain proper drainage to prevent waterlogging"
                    ]
                },
                {
                    title: "Weather-Based Crop Advisory",
                    content: "Based on upcoming weather forecasts and historical data for your region:",
                    crops: [
                        "Next 30 days: Moderate rainfall expected - ideal for transplanting rice",
                        "Temperature: Ranging 25-32¬∞C - suitable for cotton and maize growth",
                        "Humidity: 60-75% - monitor for fungal diseases in vegetables",
                        "Wind speed: Low - good for pesticide application"
                    ],
                    tips: [
                        "Schedule irrigation based on rainfall predictions",
                        "Prepare drainage systems for heavy rain periods",
                        "Store harvested crops in dry conditions"
                    ]
                }
            ];

            const randomRec = recommendations[Math.floor(Math.random() * recommendations.length)];
            
            const recSection = document.getElementById('recommendationSection');
            const recContent = document.getElementById('recommendationContent');
            
            recContent.innerHTML = `
                <h3>${randomRec.title}</h3>
                <p>${randomRec.content}</p>
                <ul>
                    ${randomRec.crops.map(crop => `<li>${crop}</li>`).join('')}
                </ul>
                <h3 style="margin-top: 20px;">Important Tips:</h3>
                <ul>
                    ${randomRec.tips.map(tip => `<li>${tip}</li>`).join('')}
                </ul>
            `;
            
            recSection.style.display = 'block';
            recSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Voice assistant
        function activateVoice() {
            alert('Voice Assistant feature coming soon! üé§\n\nYou will be able to:\n- Get weather updates\n- Check crop prices\n- Ask farming questions\n\nAll in your local language!');
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('cropModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // Initial render
        renderCrops();
    </script>
</body>
</html>